# CourseworkPHMI
![class diagram](https://pp.vk.me/c630623/v630623183/2b50c/VmiEfn3WFIc.jpg "Class Diagram")

####Создание диалога
*DialogCreatorPresenter* - класс, связывающий вид *DialogCreator* с данными, представленными классом *Dialog*. Класс *Dialog* состоит из имени формальной модели (его не интересует существование этих моделей) и из списка шагов диалога, представленных классом *DialogStep*. Каждый объект *DialogStep* имеет свой уникальный номер, сообщение об ошибке, подсказку и список допустимых ответов, представленных объектами класса *DialogResponse*. Каждый объект класса *DialogResponse* состоит из ответа, номера следующего вопроса, внтурненнего уточняющего диалога (опционально), имени действия (опционально).

####Ход диалога
*DialogPresenter* - класс, связывающий вид *DialogForm*, отображающий ход диалога, с формальной моделью *FormalModel*, которая управляет ходом диалога. Формальная модель на основе ответа пользователя определяет следующий вопрос/фразу. Любая формальная модель наследуется от абстрактоного класса *FormalModel*, который имеет свойство CurrentStep - текущий шаг диалога, метод MakeStep, который осуществляет переход к следующему шагу, и событие StepMade, оповещающее о сделанном шаге. В данной программе существует две реализации формальной модели: BasicModel - линейная модель, и GameTheoryModel - модель, основанная на принципах теории игр (модель хранит историю диалога и на основе "правил игры" делает следующий шаг). Экземпляр класса *DialogObserver* подписан на событие StepMade всех использумеых моделей. Он хранит историю диалога и при вызове метода SaveToFile сохраняет ее в файл.
